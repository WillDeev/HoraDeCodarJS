<html>
<head>
	<script>
		var senha = 2678, valorDiaria = 150.00
		var usuario, qntDias, nomeHospede, numeroQuarto
		var quartosDisponiveis = [20].fill(false)
		
		function inicio() {
			usuario = prompt("Digite o seu usuário: ")

			solicitarLogin()

			alert("Bem vindo ao hotel Transilvânia " + usuario + "! É um imenso prazer ter você por aqui")

			menu()	
		}

		function menu(){
			var escolha = parseInt(prompt('Selecione uma opção \n 1.) Reserva de Quartos \n 2.) Cadastro de Hóspedes \n 3.) Abastecimento de Carros \n 4.) Sair'));

			switch(escolha) {
				case 1:
					reserva_quartos()
				break
				case 2:
					cadastro_hospedes()
				break
				case 3:
					abastecer_carros()
				break
				case 4:
					sair()
				break
				default:
					erro()
				break
			}
		}

		function reserva_quartos() {
			var listaDisponiveis = []
			for (var i = 0; i < 20; i++){
				if (!quartosDisponiveis[i]){
					listaDisponiveis.push(i + 1)
				}
			}

			var quartoEscolhido = parseInt(prompt("Em qual quarto você pretende ficar? \nQuartos disponíveis: " + listaDisponiveis.join(", ")))

			if (quartoEscolhido < 1 || quartoEscolhido > 20){
				alert("Número de quarto inválido! Escolha um quarto entre 1 e 20")
				reserva_quartos()
				return
			}

			if (quartosDisponiveis[quartoEscolhido - 1]){
				alert("Quarto já está ocupado! Escolha outro quarto.")
				reserva_quartos()
			} else {
				quartosDisponiveis[quartoEscolhido - 1] = true
				alert("O quarto escolhido foi " + quartoEscolhido + ", e foi reservado com sucesso!")
			}

			menu();
		}

		function cadastro_hospedes() {
			qntDias = parseInt(prompt("Pretende ficar quantos dias hospedado? "))

			if(qntDias > 30 || qntDias <= 0 || isNaN(qntDias) || qntDias.trim === ""){
				alert("Digite uma quantidade de dias válida! ")
				cadastro_hospedes()
			} else {
				nomeHospede = prompt("Qual é o nome do hospede? ")
				reserva_quartos()
			}

			menu()
		}

		function abastecer_carros() {
			alert('HOTEL {NOME DO HOTEL} - ABASTECER');
			menu();
		}

		function solicitarLogin() {	
			senhaDigitada = parseInt(prompt("Digite sua senha: "))

			if (senhaDigitada != senha){
				alert("Senha inválida! Tente novamente")
				solicitarLogin()
			} else {
				alert("Login feito com sucesso!")
			}
		}

		function erro() {
			alert('Por favor, informe um número entre 1 e 4');
			menu();
		}

		function sair() {
			var confirma = confirm('Você deseja sair?');
			if (confirma) {
				alert("Muito obrigado e até logo, " + usuario)
				window.close();
			} else {
				menu();
			}
		}	
		
		inicio();
	</script>
</head>
<body>

</body>

</html>