<html>

<head>
	<script>
		var senha = 2678
		var usuario, qntDias, nomeHospede, numeroQuarto, resultadoTotalDiarias, valorDiaria
		var quartosDisponiveis = [20].fill(false)

		function inicio() {
			usuario = prompt("Digite o seu usuário: ")

			solicitarLogin()

			alert("Bem vindo ao hotel Transilvânia " + usuario + "! É um imenso prazer ter você por aqui")

			menu()
		}

		function menu() {
			var escolha = parseInt(prompt('Selecione uma opção \n 1.) Reserva de Quartos \n 2.) Cadastro de Hóspedes \n 3.) Abastecimento de Carros \n 4.) Sair'));

			switch (escolha) {
				case 1:
					reserva_quartos()
					break
				case 2:
					cadastro_hospedes()
					break
				case 3:
					abastecer_carros()
					break
				case 4:
					sair()
					break
				default:
					erro()
					break
			}
		}

		function reserva_quartos() {
			valorDiaria = parseInt(prompt("Qual o valor padrão da diária? "))

			if (valorDiaria <= 0 || isNaN(valorDiaria) || valorDiaria.trim === "") {
				alert("Digite um valor válido!")
				reserva_quartos()
			} else {
				alert("O valor escolhido foi: " + "R$" + valorDiaria + ",00")
			}


			qntDias = parseInt(prompt("Pretende ficar quantos dias hospedado? "))

			if (qntDias > 30 || qntDias <= 0 || isNaN(qntDias) || qntDias.trim === "") {
				alert("Digite uma quantidade de dias válida! ")
				reserva_quartos()
			} else {
				resultadoTotalDiarias = valorDiaria * qntDias
				alert("Você ficará por " + qntDias + " dias, o preço final será de: R$" + resultadoTotalDiarias + ",00")
			}

			nomeHospede = prompt("Qual o nome do hóspede?")

			while (nomeHospede.trim === "" || Number(nomeHospede)) {
				alert("Digite um nome!")
			}

			var listaDisponiveis = []
			for (var i = 0; i < 20; i++) {
				if (!quartosDisponiveis[i]) {
					listaDisponiveis.push(i + 1)
				}
			}

			var quartoEscolhido = parseInt(prompt("Em qual quarto você pretende ficar? \nQuartos disponíveis: " + listaDisponiveis.join(", ")))

			if (quartoEscolhido < 1 || quartoEscolhido > 20) {
				alert("Número de quarto inválido! Escolha um quarto entre 1 e 20")
				reserva_quartos()
			} else {

			}

			if (quartosDisponiveis[quartoEscolhido - 1]) {
				alert("Quarto já está ocupado! Escolha outro quarto.")
				reserva_quartos()
			} else {
				quartosDisponiveis[quartoEscolhido - 1] = true
			}

			alert("O quarto escolhido foi o Nº" + quartoEscolhido + " \nNo valor de: R$" + resultadoTotalDiarias + ",00" + " \nPara o(a) hóspede: " + nomeHospede + "\nCom o total de: " + qntDias + " dias")

			var confirma = prompt(usuario + ", você confirma a hospedagem para " + nomeHospede + " por " + qntDias + " dias para o quarto " + quartoEscolhido + " por R$" + resultadoTotalDiarias + ",00 ? (S/N)").toUpperCase()

			switch (confirma) {
				case 'S':
					alert(usuario + ", reserva efetuada para " + nomeHospede)
					break
				case 'N':
					alert("reserva cancelada")
					break
			}

			menu();
		}

		function cadastro_hospedes() {
			var idadeHospede, nomeHospede, valorTotal
			var meia = 0, inteira = 0, gratuita = 0
			var totalHospedes = []

			valorDiaria = parseInt(prompt("Qual o valor padrão da diária?"))
			
			while(true){
				nomeHospede = prompt("Qual o nome do hóspede? ")

				if (nomeHospede.toUpperCase() === 'PARE'){
					alert(usuario + " O valor total das hospedagens é: \nGratuidade: " + gratuita + "\nInteira: " + inteira + "\nMeia: " + meia)
					break
				}	

				idadeHospede = parseInt(prompt("Qual a idade do hóspede? "))

				if (idadeHospede <= 6) {
					alert(nomeHospede + " cadastrada(o) com sucesso. " + nomeHospede + " possui gratuidade")
					gratuita++
					
				} else if (idadeHospede >= 7 && idadeHospede <= 60) {
					alert(nomeHospede + " cadastrada(o) com sucesso.")
					inteira++
	
					valorTotal = valorDiaria 

				} else if (idadeHospede > 60) {
					alert(nomeHospede + " cadastrada(o) com sucesso. " + nomeHospede + " paga meia")
					meia++
	
					valorTotal = valorDiaria / 2
				}
			}
		}

		function abastecer_carros() {
			alert('HOTEL {NOME DO HOTEL} - ABASTECER');
			menu();
		}

		function solicitarLogin() {
			senhaDigitada = parseInt(prompt("Digite sua senha: "))

			if (senhaDigitada != senha) {
				alert("Senha inválida! Tente novamente")
				solicitarLogin()
			} else {
				alert("Login feito com sucesso!")
			}
		}

		function erro() {
			alert('Por favor, informe um número entre 1 e 4');
			menu();
		}

		function sair() {
			var confirma = confirm('Você deseja sair?');
			if (confirma) {
				alert("Muito obrigado e até logo, " + usuario)
				window.close();
			} else {
				menu();
			}
		}

		inicio();
	</script>
</head>

<body>

</body>

</html>